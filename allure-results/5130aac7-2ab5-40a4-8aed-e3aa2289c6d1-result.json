{"name": "test_change_pos[Espa\\xf1a-https://nuxqa5.avtest.ink/]", "status": "broken", "statusDetails": {"message": "TypeError: DatabaseManager.save_test_result() missing 1 required positional argument: 'language'", "trace": "self = <test_case_5.TestCase5 object at 0x00000220223EF360>, browser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"09f3cb8fd4eb9068ca7299c43b33edf8\")>, base_url = 'https://nuxqa5.avtest.ink/'\npos_country = 'España'\n\n    @pytest.mark.parametrize(\"base_url\", [\n        \"https://nuxqa4.avtest.ink/\",\n        \"https://nuxqa5.avtest.ink/\"\n    ])\n    @pytest.mark.parametrize(\"pos_country\", [\n        \"Otros países\",\n        \"España\",\n        \"Chile\"\n    ])\n    def test_change_pos(self, browser, base_url, pos_country):\n        \"\"\"\n        Caso 5: Verificar cambio de POS (País)\n        - Seleccionar 3 POS: Otros países, España, Chile\n        - Verificar que cada cambio de POS se haga correctamente\n        \"\"\"\n        test_name = f\"test_change_pos_{pos_country.replace(' ', '_').lower()}\"\n        video_recorder = None\n        home_page = HomePage(browser)\n    \n        try:\n            # Configurar grabación de video\n            video_recorder = VideoRecorder(\n                test_name=test_name,\n                browser_name=browser.name\n            )\n            video_recorder.start_recording()\n    \n            with allure.step(f\"1. Navegar a la página principal: {base_url}\"):\n                home_page.navigate_to(base_url)\n                home_page.wait_for_page_load()\n                video_recorder.capture_frame(browser)\n                logger.info(f\"Navegado a: {base_url}\")\n    \n                # Tomar screenshot inicial\n                home_page.take_screenshot(f\"initial_{pos_country.replace(' ', '_')}.png\")\n    \n            with allure.step(f\"2. Cambiar POS a: {pos_country}\"):\n>               home_page.select_pos(pos_country)\n\ntests\\test_case_5.py:50: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npages\\home_page.py:150: in select_pos\n    self.open_pos_dropdown()\npages\\home_page.py:135: in open_pos_dropdown\n    pos_btn = self.wait.until(EC.element_to_be_clickable(self.POS_SELECTOR_BUTTON))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"09f3cb8fd4eb9068ca7299c43b33edf8\")>, method = <function element_to_be_clickable.<locals>._predicate at 0x00000220226904A0>, message = ''\n\n    def until(self, method: Callable[[WebDriver], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       Symbols not available. Dumping unresolved backtrace:\nE       \t0x7ff678a17a35\nE       \t0x7ff678a17a90\nE       \t0x7ff6787916ad\nE       \t0x7ff6787ea13e\nE       \t0x7ff6787ea44c\nE       \t0x7ff67883ebe7\nE       \t0x7ff67883b8fb\nE       \t0x7ff6787db068\nE       \t0x7ff6787dbe93\nE       \t0x7ff678cd29d0\nE       \t0x7ff678ccce50\nE       \t0x7ff678cecc45\nE       \t0x7ff678a330ce\nE       \t0x7ff678a3adbf\nE       \t0x7ff678a20c14\nE       \t0x7ff678a20dcf\nE       \t0x7ff678a06828\nE       \t0x7ffed862e8d7\nE       \t0x7ffed9e2c53c\n\nvenv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py:101: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_case_5.TestCase5 object at 0x00000220223EF360>, browser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"09f3cb8fd4eb9068ca7299c43b33edf8\")>, base_url = 'https://nuxqa5.avtest.ink/'\npos_country = 'España'\n\n    @pytest.mark.parametrize(\"base_url\", [\n        \"https://nuxqa4.avtest.ink/\",\n        \"https://nuxqa5.avtest.ink/\"\n    ])\n    @pytest.mark.parametrize(\"pos_country\", [\n        \"Otros países\",\n        \"España\",\n        \"Chile\"\n    ])\n    def test_change_pos(self, browser, base_url, pos_country):\n        \"\"\"\n        Caso 5: Verificar cambio de POS (País)\n        - Seleccionar 3 POS: Otros países, España, Chile\n        - Verificar que cada cambio de POS se haga correctamente\n        \"\"\"\n        test_name = f\"test_change_pos_{pos_country.replace(' ', '_').lower()}\"\n        video_recorder = None\n        home_page = HomePage(browser)\n    \n        try:\n            # Configurar grabación de video\n            video_recorder = VideoRecorder(\n                test_name=test_name,\n                browser_name=browser.name\n            )\n            video_recorder.start_recording()\n    \n            with allure.step(f\"1. Navegar a la página principal: {base_url}\"):\n                home_page.navigate_to(base_url)\n                home_page.wait_for_page_load()\n                video_recorder.capture_frame(browser)\n                logger.info(f\"Navegado a: {base_url}\")\n    \n                # Tomar screenshot inicial\n                home_page.take_screenshot(f\"initial_{pos_country.replace(' ', '_')}.png\")\n    \n            with allure.step(f\"2. Cambiar POS a: {pos_country}\"):\n                home_page.select_pos(pos_country)\n                video_recorder.capture_frame(browser)\n                logger.info(f\"POS cambiado a: {pos_country}\")\n    \n                # Tomar screenshot después del cambio\n                home_page.take_screenshot(f\"after_pos_change_{pos_country.replace(' ', '_')}.png\")\n    \n            with allure.step(f\"3. Verificar que el POS {pos_country} se aplicó correctamente\"):\n                verification_result = home_page.verify_pos_changed(pos_country)\n                assert verification_result, f\"Falló la verificación del POS {pos_country}\"\n    \n                current_pos = home_page.get_current_pos()\n                logger.info(f\"POS actual detectado: {current_pos}\")\n    \n                video_recorder.capture_frame(browser)\n                logger.info(f\"POS {pos_country} verificado correctamente\")\n    \n            # Guardar resultado en base de datos\n            db = DatabaseManager()\n            db.save_test_result(\n                test_case_number=5,\n                test_case_name=f\"Change POS to {pos_country}\",\n                browser=browser.name,\n                url=base_url,\n                status=\"PASS\",\n                additional_info=f\"POS cambiado exitosamente a {pos_country}. Detectado: {current_pos}\"\n            )\n    \n            # Adjuntar evidencias a Allure\n            allure.attach(\n                browser.get_screenshot_as_png(),\n                name=f\"screenshot_pos_{pos_country.replace(' ', '_')}\",\n                attachment_type=allure.attachment_type.PNG\n            )\n    \n        except Exception as e:\n            # Capturar error y guardar en base de datos\n            error_msg = f\"Error en test_change_pos para {pos_country}: {str(e)}\"\n            logger.error(error_msg)\n    \n            if video_recorder:\n                video_recorder.capture_frame(browser)\n    \n            db = DatabaseManager()\n>           db.save_test_result(\n                test_case_number=5,\n                test_case_name=f\"Change POS to {pos_country}\",\n                browser=browser.name,\n                url=base_url,\n                status=\"FAIL\",\n                additional_info=error_msg\n            )\nE           TypeError: DatabaseManager.save_test_result() missing 1 required positional argument: 'language'\n\ntests\\test_case_5.py:94: TypeError"}, "description": "\nCaso 5: Verificar cambio de POS (País)\n- Seleccionar 3 POS: Otros países, España, Chile\n- Verificar que cada cambio de POS se haga correctamente\n", "steps": [{"name": "1. Navegar a la página principal: https://nuxqa5.avtest.ink/", "status": "passed", "start": 1761874046930, "stop": 1761874049457}, {"name": "2. Cambiar POS a: España", "status": "broken", "statusDetails": {"message": "selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\nSymbols not available. Dumping unresolved backtrace:\n\t0x7ff678a17a35\n\t0x7ff678a17a90\n\t0x7ff6787916ad\n\t0x7ff6787ea13e\n\t0x7ff6787ea44c\n\t0x7ff67883ebe7\n\t0x7ff67883b8fb\n\t0x7ff6787db068\n\t0x7ff6787dbe93\n\t0x7ff678cd29d0\n\t0x7ff678ccce50\n\t0x7ff678cecc45\n\t0x7ff678a330ce\n\t0x7ff678a3adbf\n\t0x7ff678a20c14\n\t0x7ff678a20dcf\n\t0x7ff678a06828\n\t0x7ffed862e8d7\n\t0x7ffed9e2c53c\n\n", "trace": "  File \"C:\\Users\\DavidGalvezRestrepo\\DATOS\\DAVID\\EXAMEN\\project\\tests\\test_case_5.py\", line 50, in test_change_pos\n    home_page.select_pos(pos_country)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\DavidGalvezRestrepo\\DATOS\\DAVID\\EXAMEN\\project\\pages\\home_page.py\", line 150, in select_pos\n    self.open_pos_dropdown()\n    ~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\DavidGalvezRestrepo\\DATOS\\DAVID\\EXAMEN\\project\\pages\\home_page.py\", line 135, in open_pos_dropdown\n    pos_btn = self.wait.until(EC.element_to_be_clickable(self.POS_SELECTOR_BUTTON))\n  File \"C:\\Users\\DavidGalvezRestrepo\\DATOS\\DAVID\\EXAMEN\\project\\venv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py\", line 101, in until\n    raise TimeoutException(message, screen, stacktrace)\n"}, "start": 1761874049457, "stop": 1761874060016}], "attachments": [{"name": "video_pos_España", "source": "66b5f69b-372b-46ba-a2e5-243fde153524-attachment.mp4", "type": "video/mp4"}, {"name": "log", "source": "02a955f5-e7e4-4f96-bbf5-20e26ea6ab63-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "pos_country", "value": "'España'"}, {"name": "base_url", "value": "'https://nuxqa5.avtest.ink/'"}], "start": 1761874046930, "stop": 1761874060217, "uuid": "069e3a98-9d91-455e-a379-31890dbb9bb0", "historyId": "142895d4a99ae7d33ad5a00374675c59", "testCaseId": "a5ef926c4a75e1b9fb88eddb1cd81bcc", "fullName": "tests.test_case_5.TestCase5#test_change_pos", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_case_5"}, {"name": "subSuite", "value": "TestCase5"}, {"name": "host", "value": "DESKTOP-EOEE1L3"}, {"name": "thread", "value": "4600-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_case_5"}]}